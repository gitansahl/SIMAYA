<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Profil</title>
    <object th:include="fragments/fragment :: css" th:remove="tag"></object>
    <object th:include="fragments/fragment :: js" th:remove="tag"></object>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <style>
        .card-style1 {
            box-shadow: 0px 0px 10px 0px rgb(89 75 128 / 9%);
        }
        .border-0 {
            border: 0!important;
        }
        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid rgba(0,0,0,.125);
            border-radius: 0.25rem;
        }

        section {
            padding: 120px 0;
            overflow: hidden;
            background-image: url("https://www.linkpicture.com/q/bg_17.png");
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: cover;
            font-family: "Segoe UI", "Segoe UI Semibold", "Segoe UI Black", sans-serif;
        }
        .mb-2-3, .my-2-3 {
            margin-bottom: 2.3rem;
        }

        .section-title {
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        .text-primary {
            color: rgba(0, 0, 0, 1) !important;
        }
        .text-secondary {
            color: #15395A !important;
        }
        .font-weight-600 {
            font-weight: 600;
        }
        .display-26 {
            font-size: 1.3rem;
        }

        @media screen and (min-width: 992px){
            .p-lg-7 {
                padding: 4rem;
            }
        }
        @media screen and (min-width: 768px){
            .p-md-6 {
                padding: 3.5rem;
            }
        }
        @media screen and (min-width: 576px){
            .p-sm-2-3 {
                padding: 2.3rem;
            }
        }
        .p-1-9 {
            padding: 1.9rem;
        }

        .bg-secondary {
            background: #15395A !important;
        }
        @media screen and (min-width: 576px){
            .pe-sm-6, .px-sm-6 {
                padding-right: 3.5rem;
            }
        }
        @media screen and (min-width: 576px){
            .ps-sm-6, .px-sm-6 {
                padding-left: 3.5rem;
            }
        }
        .pe-1-9, .px-1-9 {
            padding-right: 1.9rem;
        }
        .ps-1-9, .px-1-9 {
            padding-left: 1.9rem;
        }
        .pb-1-9, .py-1-9 {
            padding-bottom: 1.9rem;
        }
        .pt-1-9, .py-1-9 {
            padding-top: 1.9rem;
        }
        .mb-1-9, .my-1-9 {
            margin-bottom: 1.9rem;
        }
        @media (min-width: 992px){
            .d-lg-inline-block {
                display: inline-block!important;
            }
        }
        .rounded {
            border-radius: 0.25rem!important;
        }
    </style>
</head>
<body>
<nav th:replace="fragments/fragment :: navbar('abc')"></nav>
<section class="bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 mb-4 mb-sm-5">
                <div class="card card-style1 border-0">
                    <div class="card-body p-1-9 p-sm-2-3 p-md-6 p-lg-7">
                        <div class="row align-items-center">
                            <div class="col-lg-4 mb-4 mb-lg-0">
                                <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="...">
                            </div>
                            <div class="col-lg-6 px-xl-10">
                                <ul class="list-unstyled mb-1-9">
                                    <li class="display-28"><span style="font-size: 2.5em" class="display-26 text-secondary me-2 font-weight-600">Gitan Sahl Tazakha Wijaya</span></li>
                                    <li class="display-28"><span style="font-size: 1.5em" class="display-26 text-secondary me-2">gitansahltw@gmail.com</span></li>
                                    <li class="display-28"><span style="font-size: 1.5em" class="display-26 text-secondary me-2">081390281317</span></li>
                                    <li class="display-28"><span style="font-size: 1.5em" class="display-26 text-secondary me-2">Kendal, 15 April 2002</span></li>
                                </ul>
                            </div>
                            <div style="align-self: flex-start; text-align: right" class="col-lg-2 px-xl-10 h-100">
                                <h3>Aktif</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 mb-4 mb-sm-5">
                <div class="row">
                    <div class="col">
                        <span class="section-title text-primary">Divisi</span>
                        <p class="mb-5">Keuangan</p>
                        <span class="section-title text-primary">Penugasan</span>
                        <p>Gaada di Model :((</p>
                    </div>
                    <div class="col">
                        <span class="section-title text-primary">Golongan Darah</span>
                        <p class="mb-5">O</p>
                        <span class="section-title text-primary">Jenis Kelamin</span>
                        <p>Laki-laki</p>
                    </div>
                    <div class="col">
                        <span class="section-title text-primary">Pekerjaan</span>
                        <p class="mb-5">PNS</p>
                        <span class="section-title text-primary">Aset</span>
                        <p>Mobil, Motor, Vila, Rumah</p>
                    </div>
                    <div class="col">
                        <span class="section-title text-primary">Mengelola Mentoring</span>
                        <p>Ya</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 mb-4 mb-sm-5">
                <div>
                    <span class="section-title text-primary mb-3 mb-sm-4">About Me</span>
                    <p>Edith is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                </div>
            </div>
        </div>

        <div id="wrongPasswordText" th:text="${wrong_password}" hidden></div>
        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <form th:action="@{/profil}" th:object="${ubahPassword}" method="POST" class="container needs-validation">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Ubah Kata Sandi</h1>
                            <input type="text" th:field="*{id}" hidden>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" data-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div th:if="${wrong_password}">
                                <div id="wrongPasswordInfo" class="alert alert-danger alert-dismissible fade show" role="alert">
                                    <strong>Kata sandi lama yang dimasukkan salah.</strong>
                                </div>
                            </div>
                            <div class="my-3">
                                <label for="formKataSandiLama" class="form-label">Kata Sandi Lama<span style="color: red">*</span></label>
                                <div class="input-group">
                                    <input type="password" th:field="*{oldPassword}" class="form-control input-text border-success rounded-start border border-2" id="formKataSandiLama" placeholder="Masukkan kata sandi lama..." required>
                                    <span class="input-group-text" id="basic-addon1" onclick="clickBiEye('#togglePassword1', '#formKataSandiLama')"><i class="bi bi-eye-slash mb-2" id="togglePassword1"></i></span>
                                    <div class="valid-feedback">
                                        Looks good!
                                    </div>
                                    <div class="invalid-feedback">
                                        Masukkan Kata Sandi Lama.
                                    </div>
                                </div>
                            </div>
                            <div class="my-3">
                                <label for="formKataSandiBaru" class="form-label">Kata Sandi Baru<span style="color: red">*</span></label>
                                <input type="password" onchange="cekNewPassword()" th:field="*{newPassword}" class="form-control input-text border-success rounded-start border border-2" id="formKataSandiBaru" placeholder="Masukkan kata sandi baru..." required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                                <div class="invalid-feedback">
                                    Masukkan Kata Sandi Baru.
                                </div>
                            </div>
                            <div class="my-3">
                                <label for="formKonfirmasiKataSandiBaru" class="form-label">Konfirmasi Kata Sandi Baru<span style="color: red">*</span></label>
                                <input type="password" onchange="cekNewPassword()" class="form-control border-success rounded-start border border-2" id="formKonfirmasiKataSandiBaru" placeholder="Konfirmasi kata sandi baru..." required>
                                <div class="valid-feedback">
                                    Kata sandi sesuai.
                                </div>
                                <div class="invalid-feedback">
                                    Kata sandi tidak sesuai.
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-success" data-bs-dismiss="modal" data-dismiss="modal">Close</button>
                            <button type="submit"
                                    class="btn btn-success"
                                    data-toggle="modal"
                                    data-target="#exampleModal"
                                    id="submit" disabled>
                                Ubah
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="row mt-5 mb-3">
            <div class="col-4"></div>
            <div class="col-4 text-center">
                <button type="button" class="btn btn-success btn-lg" data-toggle="modal" onclick="removeWrongPassword()"
                        data-target="#staticBackdrop">
                    Ubah Kata Sandi
                </button>
            </div>
            <div class="col-4"></div>
        </div>

    </div>
</section>

<script th:inline="javascript">

    $(document).ready(function (){
        const text_wrong_passwors = document.getElementById("wrongPasswordText").innerText
        if (text_wrong_passwors === "Salah Kata Sandi") {
            $('#staticBackdrop').modal('show');
        }
    });

    $('.input-text').change((e) => {
        if (e.target.value === '') {
            $(e.target).addClass("is-invalid");
            $(e.target).addClass("border-danger");

            $(e.target).removeClass("border-success");
            $(e.target).removeClass("is-valid");
        } else {
            $(e.target).removeClass("is-invalid");
            $(e.target).removeClass("border-danger");

            $(e.target).addClass("border-success");
            $(e.target).addClass("is-valid");
        }

        cekValid()
    });

    function cekNewPassword() {
        const sandiBaru = document.getElementById("formKataSandiBaru")
        const konfirmasiSandiBaru = document.getElementById("formKonfirmasiKataSandiBaru")

        if (konfirmasiSandiBaru.value.length > 0) {
            if (sandiBaru.value === konfirmasiSandiBaru.value) {
                $(konfirmasiSandiBaru).removeClass("is-invalid");
                $(konfirmasiSandiBaru).removeClass("border-danger");

                $(konfirmasiSandiBaru).addClass("border-success");
                $(konfirmasiSandiBaru).addClass("is-valid");
            } else {
                $(konfirmasiSandiBaru).addClass("is-invalid");
                $(konfirmasiSandiBaru).addClass("border-danger");

                $(konfirmasiSandiBaru).removeClass("border-success");
                $(konfirmasiSandiBaru).removeClass("is-valid");
            }
        }

        cekValid()
    }

    function cekValid() {
        const valid = document.getElementsByClassName("is-valid")
        if (valid.length === 3) {
            $("#submit").removeAttr("disabled")
        } else {
            $("#submit").attr("disabled", true)
        }
    }

    function clickBiEye(idTogglePassword, idInput) {

        const togglePassword = document
            .querySelector(idTogglePassword);

        const password = document.querySelector(idInput);

        const type = password
            .getAttribute('type') === 'password' ?
            'text' : 'password';

        password.setAttribute('type', type);

        // Toggle the eye and bi-eye icon
        togglePassword.classList.toggle('bi-eye');

    }

    function removeWrongPassword() {
        document.getElementById("wrongPasswordInfo").style.display = "none"
    }

</script>

</body>
</html>